<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <title>Page Title</title>
    <style>
        
    </style>
</head>

<body>
    <div id="fade-obj" style="width:300px;height:300px;background:#000;"></div>
    <button id="fade-btn">淡出</button>
    <script>
        var opacityNum = 10;
        var btn = document.getElementById("fade-btn");
        function change() {

            var opa = 0;
            var btnText = btn.innerText;
            if (btnText == "淡出") {
                opa = 0;
            } else {
                opa = 10;
            }
            btn.disabled = true
            fade(opa)
        }

        function fade(opa) {
            var block = document.getElementById("fade-obj");
            if (opa == 0) {
                if (opacityNum >= 0) {
                    opacityNum--;
                    block.style.opacity = opacityNum / 10;
                    setTimeout('fade('+opa+')', 100);
                } else {
                    btn.innerHTML = "淡入";
                    btn.disabled = false;
                }
            }else{
                if(opacityNum<=10){
                    opacityNum++;
                    block.style.opacity = opacityNum / 10;
                    setTimeout('fade('+opa+')', 100);
                }else{
                    btn.innerHTML = "淡出";
                    btn.disabled = false;
                }
            }
        }
        document.getElementById("fade-btn").addEventListener('click',function(){
            change()
        });

        
    </script>
</body>

</html>